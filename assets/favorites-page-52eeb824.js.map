{"version":3,"file":"favorites-page-52eeb824.js","sources":["../../src/js/common.js","../../src/js/elements.js","../../src/js/templates/subfilters-markup.js","../../src/img/icons.svg#icon-remove","../../src/img/icons.svg#icon-star","../../src/img/icons.svg#icon-arrow","../../src/img/icons.svg#icon-run-man","../../src/img/icons.svg#icon-heart","../../src/js/templates/exercises-markup.js","../../src/js/templates/pagination-markup.js","../../src/img/icons.svg#icon-close","../../src/img/icons.svg#icon-camera","../../src/js/templates/exercise-details-markup.js","../../src/js/templates/quote-markup.js","../../src/img/gallery-not-found/not-found-gallery-desktop.jpg","../../src/img/gallery-not-found/not-found-gallery-desktop@2x.jpg","../../src/img/gallery-not-found/not-found-gallery-tablet.jpg","../../src/img/gallery-not-found/not-found-gallery-tablet@2x.jpg","../../src/img/gallery-not-found/not-found-gallery-mobile.jpg","../../src/img/gallery-not-found/not-found-gallery-mobile@2x.jpg","../../src/js/templates/not-found-gallery-markup.js","../../src/js/helpers/pagination.js","../../src/js/helpers/toaster.js","../../src/js/services/exercises-api.js","../../src/js/handlers/filter-handler.js","../../src/js/handlers/subfilter-handler.js","../../src/js/helpers/loader.js","../../src/js/handlers/add-favorites-handler.js","../../src/js/templates/loader-markup.js","../../src/js/renderers/render-loader.js","../../src/js/handlers/validation-handler.js","../../src/js/handlers/rating-modal-handler.js","../../src/js/handlers/rating-select-handler.js","../../src/js/handlers/exercise-handler.js","../../src/js/handlers/pagination-handler.js","../../src/js/handlers/subscribe-handler.js","../../src/js/handlers/policy-handler.js","../../src/js/handlers/search-form-handler.js","../../src/js/handlers/search-reset-handler.js","../../src/js/helpers/scroll.js","../../src/js/handlers/scrollTop-handlers.js","../../src/js/handlers/back-button-handler.js","../../src/js/handlers/favorites-pagination-handler.js","../../src/js/handlers/burget-menu-handler.js","../../src/js/handlers/favorites-remove-handler.js","../../src/js/handlers/add-to-favorites-btn-handler.js","../../src/js/helpers/screen-resolution.js","../../src/js/services/gallery.js","../../src/js/renderers/render-exercises.js","../../src/js/renderers/render-subfilters.js","../../src/js/renderers/render-quote.js","../../src/js/renderers/render-favorites.js","../../src/js/services/favorites-page.js"],"sourcesContent":["const common = {\n  SS_KEY_FILTERS: 'user filters',\n  SS_KEY_FAVORITES: 'favorites-page',\n  LS_KEY_FAVORITES: 'favorites',\n  LS_KEY_QUOTE: 'quote',\n  BASE_QUOTE: {\n    author: 'Tom Brady',\n    quote:\n      \"A lot of times I find that people who are blessed with the most talent don't ever develop that attitude, and the ones who aren't blessed in that way are the most competitive and have the biggest heart.\",\n  },\n  ERROR_MESSAGE: 'Something goes wrong!',\n};\n\nexport { common };\n","const elements = {\n  navHome: document.querySelectorAll('.js-nav-home'),\n  navFavorites: document.querySelectorAll('.js-nav-favorites'),\n  body: document.querySelector('body'),\n  burger: document.querySelector('.js-burger'),\n  filter: document.querySelector('.js-filter'),\n  gallery: document.querySelector('.js-gallery'),\n  gallerySubtitle: document.querySelector('.js-subtitle'),\n  pagination: document.querySelector('.js-pagination'),\n  searchForm: document.querySelector('.js-search-form'),\n  resetSearchForm: document.querySelector('.js-reset-form'),\n  backBtn: document.querySelector('.js-back-button'),\n  subscribeForm: document.querySelector('.js-subscribe-form'),\n  quote: document.querySelector('.js-quote'),\n  policyBtn: document.querySelector('.js-policy-modal-open'),\n  termsBtn: document.querySelector('.js-terms-modal-open'),\n  scrollTopBtn: document.querySelector('.js-scroll-top-button'),\n  btnCloseBurger: document.querySelector('.mobile-menu-close-btn'),\n  btnOpenBurger: document.querySelector('.mobile-menu-open-btn'),\n  burgerMenu: document.querySelector('.mobile-menu-backdrop'),\n  favoritesAnchor: document.querySelector('.js-anchor'),\n};\n\nexport { elements };\n","function subfiltersMarkup(array) {\n  return array\n    .map(\n      ({\n        filter,\n        name,\n        imgURL,\n      }) => `<li class=\"exercises-item\">\n      <a data-subfilter=\"${name}\" class=\"exercises-item-container\" href=\"\">\n        <img class=\"exercises-item-image\" src=\"${imgURL}\" alt=\"${name}\" />\n        <div class=\"exercises-proprties-container\">\n          <h4 class=\"exercises-item-name\">${name}</h4>\n          <p class=\"exercises-item-type\">${filter}</p>\n        </div>\n      </a>\n    </li>`\n    )\n    .join('');\n}\n\nexport default subfiltersMarkup;\n","export default \"__VITE_ASSET__dfe7f17b__$_#icon-remove__\"","export default \"__VITE_ASSET__10f6c6ff__$_#icon-star__\"","export default \"__VITE_ASSET__db2fd447__$_#icon-arrow__\"","export default \"__VITE_ASSET__3f4e380b__$_#icon-run-man__\"","export default \"__VITE_ASSET__664e397c__$_#icon-heart__\"","import removeIconPath from '../../img/icons.svg#icon-remove';\nimport starIconPath from '../../img/icons.svg#icon-star';\nimport iconArrowPath from '../../img/icons.svg#icon-arrow';\nimport iconRunningManPath from '../../img/icons.svg#icon-run-man';\nimport heartIconPath from '../../img/icons.svg#icon-heart';\nimport { favorites } from '../services/favorites-page';\n\nfunction exercisesMarkup(array, page) {\n  return array\n    .map(\n      ({ _id, bodyPart, name, target, rating, burnedCalories, time }) => `\n         <li class=\"main-item_card-exercises\">\n      <a class=\"link-exercise-card\" href=\"\" data-id=\"${_id}\">\n        <!-- Top place card -->\n        <div class=\"card-cont-content\">\n          <div class=\"cont-rating-btn-title\">\n            <div class=\"const-text-exer\">\n              <p class=\"text-card-exer\">WORKOUT</p>\n            </div>\n            ${\n              page === 'favorites'\n                ? `\n              <div class=\"btn-card-group\">\n                <button class=\"btn-delete-card\" type=\"button\" data-delete=\"${_id}\">\n                <svg class=\"icon-delete-favorite\" width=\"16\" height=\"16\">\n                  <use href=\"${removeIconPath}\"></use>\n                </svg>\n                </button>\n              </div> \n              `\n                : `\n            <div class=\"btn-card-group\">\n               <button class=\"btn-delete-card ${\n                 favorites.isFavorite(_id) ? '' : 'is-hidden'\n               }\" type=\"button\" data-delete=\"${_id}\">\n                <svg class=\"icon-delete-favorite\" width=\"16\" height=\"16\">\n                  <use href=\"${removeIconPath}\"></use>\n                </svg>\n                </button>\n                <button class=\"btn-add-card ${\n                  favorites.isFavorite(_id) ? 'is-hidden' : ''\n                }\"\" type=\"button\" data-add=\"${_id}\">\n                <svg class=\"icon-add-favorite\" width=\"16\" height=\"16\">\n                 <use href=\"${heartIconPath}\"></use>\n               </svg>\n               </button>\n            </div>  \n            ${\n              rating\n                ? `\n                <div class=\"cont-card-rating\">\n                <p class=\"card-rating-exer\">${Math.round(rating) + '.0'}</p>\n                <svg class=\"icon-card-exer\" width=\"18\" height=\"18\">\n                  <use href=\"${starIconPath}\"></use>\n                </svg>\n              </div>`\n                : ``\n            }\n              `\n            }\n            <div class=\"block-btn-icon-exer\">\n              <span class=\"btn-card-exer\">Start</span>\n              <svg class=\"icon-card-btn\" width=\"16\" height=\"16\">\n                <use href=\"${iconArrowPath}\"></use>\n              </svg>\n            </div>\n          </div>\n          <!-- Middle place card -->\n          <div class=\"cont-icon-name-text\">\n            <svg class=\"icon-people-card\" width=\"24\" height=\"24\">\n              <use href=\"${iconRunningManPath}\"></use>\n            </svg>\n            <p class=\"text-name-exercises-card\">${name}</p>\n          </div>\n          <!-- End place card -->\n          <ul class=\"list-info-exer\">\n            <li class=\"item-card-exer\">\n              <p class=\"text-title-item-exer big\">Burned calories:</p>\n              <p class=\"text-info-exer size-time\">${burnedCalories}/${time}</p>\n            </li>\n            <li class=\"item-card-exer\">\n              <p class=\"text-title-item-exer medium\">Body part:</p>\n              <p class=\"text-info-exer size-body\">${bodyPart}</p>\n            </li>\n            <li class=\"item-card-exer\">\n              <p class=\"text-title-item-exer small\">Target:</p>\n              <p class=\"text-info-exer size-target\">${target}</p>\n            </li>\n          </ul>\n        </div>\n      </a>\n    </li>`\n    )\n    .join('');\n}\n\nexport default exercisesMarkup;\n","function paginationMarkup(activePage, total) {\n  let arrElPagin = [];\n  let arrNumPagin = [];\n\n  if (total <= 5) {\n    for (let currentPage = 1; currentPage <= total; currentPage += 1) {\n      if (!isActivePage(currentPage, activePage)) {\n        arrElPagin.push(\n          `<li class=\"elm\"><button type=\"button\" class=\"pagination-el ${\n            isActivePage(currentPage, activePage) ? 'active' : 'unactive'\n          }\" data-page=\"${currentPage}\" >${currentPage}</button></li>`\n        );\n      } else {\n        arrElPagin.push(\n          `<li class=\"elm\"><button type=\"button\" disabled class=\"pagination-el ${\n            isActivePage(currentPage, activePage) ? 'active' : 'unactive'\n          }\" data-page=\"${currentPage}\" >${currentPage}</button></li>`\n        );\n      }\n    }\n  } else {\n    const startPage = Math.max(Math.min(activePage - 2, total - 4), 1);\n    const endPage = Math.min(startPage + 4, total);\n    for (\n      let currentPage = startPage;\n      currentPage <= endPage;\n      currentPage += 1\n    ) {\n      arrNumPagin.push(currentPage);\n      if (!isActivePage(currentPage, activePage)) {\n        arrElPagin.push(\n          `<li class=\"elm\"><button type=\"button\" class=\"pagination-el unactive\"  data-page=\"${currentPage}\" >${currentPage}</button></li>`\n        );\n      } else {\n        arrElPagin.push(\n          `<li class=\"elm\"><button type=\"button\" class=\"pagination-el active\" disabled data-page=\"${currentPage}\" >${currentPage}</button></li>`\n        );\n      }\n    }\n    if (!arrNumPagin.includes(1)) {\n      arrElPagin.unshift(\n        `<li class=\"elm\"><button type=\"button\" class=\"pagination-el unactive\"  data-page=\"1\" >1</button>&nbsp;&nbsp;...</li>`\n      );\n    }\n    if (!arrNumPagin.includes(total)) {\n      arrElPagin.push(\n        `<li class=\"elm\">...&nbsp;&nbsp;<button type=\"button\" class=\"pagination-el unactive\"  data-page=\"${total}\">${total}</button></li>`\n      );\n    }\n  }\n\n  return arrElPagin.join('');\n}\n\nfunction isActivePage(current, active) {\n  return current === active;\n}\nexport default paginationMarkup;\n","export default \"__VITE_ASSET__cb42c3c5__$_#icon-close__\"","export default \"__VITE_ASSET__7f604992__$_#icon-camera__\"","import heartIcon from '../../img/icons.svg#icon-heart';\nimport removeIcon from '../../img/icons.svg#icon-remove';\nimport closeIcon from '../../img/icons.svg#icon-close';\nimport starIcon from '../../img/icons.svg#icon-star';\nimport noImgIcon from '../../img/icons.svg#icon-camera';\n\nfunction exerciseDetailsMarkup({\n  bodyPart,\n  equipment,\n  gifUrl,\n  name,\n  target,\n  description,\n  rating,\n  burnedCalories,\n  time,\n  popularity,\n  _id,\n}) {\n  let newRating = Math.round(rating);\n  let isId = false;\n  const parsedData = JSON.parse(localStorage.getItem('favorites'));\n  if (parsedData) {\n    isId = parsedData.some(obj => obj._id === _id);\n  }\n  return `\n    <div class=\"exercise-modal\">\n        <button class=\"exercise-card-close-btn\" type=\"button\">\n            <svg class=\"exercise-card-close-icon\" aria-label=\"Modal window close icon\">\n                <use href=\"${closeIcon}\"></use>\n            </svg>\n        </button>\n        <div class=\"exercise-card\">\n            <div class=\"exercise-card-img-wrap\">\n            ${\n              gifUrl\n                ? `<img src=${gifUrl} alt=\"Exercise image\">`\n                : `\n            <div class=\"exercise-card-no-img-wrap\">\n              <svg class=\"exercise-card-no-img\" aria-label=\"No image\">\n                  <use class=\"exercise-card-no-img-icon\" href=\"${noImgIcon}\"></use>\n              </svg>\n              <span>image not found</span>\n            </div>\n            `\n            }\n    \n            </div>\n                <div class=\"exercise-card-info\">\n                    <div>\n                        <h2 class=\"exercise-card-title\">${name}</h2>\n                        ${\n                          newRating\n                            ? ` <div class=\"exercise-card-rating\"><span>${\n                                newRating ? newRating + '.0' : ''\n                              }</span>\n                        ${[1, 2, 3, 4, 5]\n                          .map(i => {\n                            return `\n                        <svg aria-label=\"Rating star\" width=\"16\" height=\"16\" stroke=\"var(--black)\" fill=${\n                          newRating >= i\n                            ? 'var(--yellow)'\n                            : 'var(--white-transparent-20)'\n                        } >\n                            <use href=\"${starIcon}\"></use>\n                        </svg>`;\n                          })\n                          .join('')}\n                          </div>`\n                            : ''\n                        }\n                            \n                        <ul class=\"exercise-card-details-list\">\n                        ${\n                          target\n                            ? `<li class=\"exercise-card-details-item\">\n                        <p class=\"details-name\">Target</p>\n                        <p class=\"details-value\">${target}</p>\n                        </li>`\n                            : ``\n                        }\n                        ${\n                          bodyPart\n                            ? `<li class=\"exercise-card-details-item\">\n                              <p class=\"details-name\">Body Part</p>\n                              <p class=\"details-value\">${bodyPart}</p>\n                          </li>`\n                            : ``\n                        }\n                          ${\n                            equipment\n                              ? `<li class=\"exercise-card-details-item\">\n                              <p class=\"details-name\">Equipment</p>\n                              <p class=\"details-value\">${equipment}</p>\n                          </li>`\n                              : ``\n                          }\n                          ${\n                            popularity\n                              ? `<li class=\"exercise-card-details-item\">\n                              <p class=\"details-name\">Popular</p>\n                              <p class=\"details-value\">${popularity}</p>\n                          </li>`\n                              : ``\n                          }\n                          ${\n                            burnedCalories && time\n                              ? `<li class=\"exercise-card-details-item\">\n                              <p class=\"details-name\">Burned calories</p>\n                              <p class=\"details-value\">${burnedCalories}/${time} min</p>\n                          </li>`\n                              : ``\n                          }\n                         \n                        </ul>\n                        <p class=\"exercise-card-description\">${\n                          description ? description : ''\n                        }</p>\n                    </div>\n                    <div class=\"exercise-card-btn-group\">\n                        <button class=\"card-btn add-favorites-btn\" ${\n                          isId ? `style=\"padding: 12px 9px\"` : ''\n                        }>\n                            <span>${\n                              isId\n                                ? 'Remove from favorites'\n                                : 'Add to favorites'\n                            }</span>\n                            <svg class=\"favorites-icon\" aria-label=\"Favorite icon\" width=\"20\" height=\"20\" >\n                                <use href=\"${\n                                  isId ? `${removeIcon}` : `${heartIcon}`\n                                }\"></use>\n                            </svg>\n                        </button>\n                        <button class=\"card-btn add-rating-btn\">Give a rating</button>\n                </div>\n            </div>\n        </div>\n    </div>`;\n}\n\nexport default exerciseDetailsMarkup;\n","function quoteMarkup({ author, quote }, page) {\n  return `\n          ${\n            page === \"favorite\" ? `<p class=\"favorite-text-quote\">${quote}</p>`\n                : `<p class=\"text-quote list-item-text\">${quote}</p>`\n          }\n          <p class=\"autor-quote list-item-text\">${author}</p>\n        `;\n}\n\nexport default quoteMarkup;\n","export default \"__VITE_ASSET__8ef1b929__\"","export default \"__VITE_ASSET__010f1cdc__\"","export default \"__VITE_ASSET__44184378__\"","export default \"__VITE_ASSET__80764dae__\"","export default \"__VITE_ASSET__ff41224b__\"","export default \"__VITE_ASSET__538b4290__\"","import desktopImage from '../../img/gallery-not-found/not-found-gallery-desktop.jpg';\nimport desktopImageRetina from '../../img/gallery-not-found/not-found-gallery-desktop@2x.jpg';\nimport tabletImage from '../../img/gallery-not-found/not-found-gallery-tablet.jpg';\nimport tabletImageRetina from '../../img/gallery-not-found/not-found-gallery-tablet@2x.jpg';\nimport mobileImage from '../../img/gallery-not-found/not-found-gallery-mobile.jpg';\nimport mobileImageRetina from '../../img/gallery-not-found/not-found-gallery-mobile@2x.jpg';\n\nfunction notFoundGalleryMarkup() {\n  return `<li class='not-found-gallery'><picture>\n    <source media=\"(min-width: 1440px)\" srcset=\"${desktopImage}, ${desktopImageRetina} 2x\" />\n    <source media=\"(min-width: 768px)\" srcset=\"${tabletImage}, ${tabletImageRetina} 2x\" />\n    <source srcset=\"${mobileImage}, ${mobileImageRetina} 2x\" />\n    <img src=\"${desktopImage}\" alt=\"Exercises not found\" />\n  </picture></li>`;\n}\n\nexport default notFoundGalleryMarkup;\n","import { elements } from '../elements';\nimport {paginationMarkup} from '../templates';\nfunction renderPagination(page, totalPages) {\n  elements.pagination.innerHTML = paginationMarkup(page, totalPages);\n}\nexport { renderPagination};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  timeout: 5000,\n  resetOnHover: true,\n  position: 'topCenter',\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n  theme: 'dark',\n  backgroundColor: '#242424',\n  maxWidth: 600,\n});\n\nfunction showError(message) {\n  iziToast.show({\n    overlay: true,\n    overlayClose: true,\n    progressBarColor: '#BF5858',\n    message,\n  });\n}\n\nfunction showWarning(message) {\n  iziToast.show({\n    progressBarColor: '#EEA10C',\n    message,\n  });\n}\n\nfunction showSuccess(message) {\n  iziToast.show({\n    progressBarColor: '#4FAC40',\n    message,\n  });\n}\n\nexport { showError, showWarning, showSuccess };\n","import axios from 'axios';\n\nconst BASE_URL = 'https://your-energy.b.goit.study/api/';\n\nconst filters = {\n  bodypart: 'Body parts',\n  muscles: 'Muscles',\n  equipment: 'Equipment',\n};\n\nclass ExercisesAPI {\n  constructor({\n    filter = 'muscles',\n    subFilter = '',\n    keyword = '',\n    page = 1,\n    limit = 8,\n  }) {\n    this.filter = filter;\n    this.subFilter = subFilter;\n    this.keyword = keyword;\n    this.page = page;\n    this.limit = limit;\n    this.id = '';\n  }\n\n  async getFilters() {\n    const response = await axios.get(`${BASE_URL}filters`, {\n      params: {\n        filter: filters[this.filter],\n        page: this.page,\n        limit: this.limit,\n      },\n    });\n    return response.data;\n  }\n\n  async getExercises() {\n    const response = await axios.get(`${BASE_URL}exercises`, {\n      params: {\n        [this.filter]: this.subFilter,\n        keyword: this.keyword,\n        page: this.page,\n        limit: this.limit,\n      },\n    });\n    return response.data;\n  }\n\n  async getExerciseById(id) {\n    const response = await axios.get(`${BASE_URL}exercises/${id}`);\n    this.id = id;\n    return response.data;\n  }\n\n  async updateExerciseRating({ rate, email, review }) {\n    const response = await axios.patch(\n      `${BASE_URL}exercises/${this.id}/rating`,\n      { rate, email, review }\n    );\n    return response.data;\n  }\n\n  async getQuote() {\n    const response = await axios.get(`${BASE_URL}quote`);\n    return response.data;\n  }\n\n  async subscribe({ email }) {\n    const response = await axios.post(`${BASE_URL}subscription`, { email });\n    return response.data;\n  }\n}\n\nconst exercisesApi = new ExercisesAPI({});\nexport { exercisesApi };\n","import { gallery } from '../services/gallery';\n\nfunction handleFilter(e) {\n  if (!e.target.hasAttribute('data-filter')) return;\n  gallery.changeFilter(e.target.dataset.filter);\n}\n\nexport default handleFilter;\n","import { gallery } from '../services/gallery';\n\nasync function handleSubfilter(e) {\n  e.preventDefault();\n  if (!e.target.closest('[data-subfilter]')) return;\n\n  const { subfilter } = e.target.closest('[data-subfilter]').dataset;\n  gallery.goExercises(subfilter);\n}\nexport default handleSubfilter;\n","function showLoader(container) {\n  const loader = (container || document).querySelector('.loader');\n  loader.classList.remove('is-hidden');\n}\nfunction hideLoader(container) {\n  const loader = (container || document).querySelector('.loader');\n  loader.classList.add('is-hidden');\n}\n\nexport { showLoader, hideLoader };\n","import { favorites } from '../services/favorites-page';\nimport heartIcon from '../../img/icons.svg#icon-heart';\nimport removeIcon from '../../img/icons.svg#icon-remove';\n\nfunction handleFavorites(data) {\n  const favorite = document.querySelector('.add-favorites-btn');\n\n  if (!favorites.isFavorite(data._id)) {\n    favorites.addFavorite(data);\n    favorite.style.padding = '12px 9px';\n    favorite.querySelector('span').textContent = 'Remove from favorites';\n    favorite.querySelector('use').setAttribute('href', removeIcon);\n  } else {\n    favorites.removeFavorite(data._id);\n    favorite.style.padding = '12px 16px';\n    favorite.querySelector('span').textContent = `Add to favorites`;\n    favorite.querySelector('use').setAttribute('href', heartIcon);\n  }\n}\n\nexport default handleFavorites;\n","function loaderMarkup() {\n  return `<span class=\"loader is-hidden\"></span>`;\n}\nexport default loaderMarkup;\n","import loaderMarkup from '../templates/loader-markup';\n\nfunction renderLoader(container) {\n  if (!container) return;\n  if (container.querySelector('.loader')) return;\n  container.insertAdjacentHTML('beforeend', loaderMarkup());\n}\n\nexport default renderLoader;\n","const emailRegexp = /^\\w+@[a-zA-Z_]+?.[a-zA-Z]{2,3}$/;\n\nfunction handleValidationErrors(errors, form) {\n  const [ratingFieldset, emailLabel, reviewLabel] = form.querySelectorAll(\n    '.users_rating, label'\n  );\n  const [ratingError, emailError, reviewError] =\n    form.querySelectorAll('.error');\n\n  if (errors.rate) {\n    ratingFieldset.classList.add('invalid');\n    ratingError.textContent = errors.rate;\n  } else {\n    ratingFieldset.classList.remove('invalid');\n    ratingError.textContent = '';\n  }\n\n  if (errors.email) {\n    emailLabel.classList.add('invalid');\n    emailError.textContent = errors.email;\n  } else {\n    emailLabel.classList.remove('invalid');\n    emailError.textContent = '';\n  }\n\n  if (errors.review) {\n    reviewLabel.classList.add('invalid');\n    reviewError.textContent = errors.review;\n  } else {\n    reviewLabel.classList.remove('invalid');\n    reviewError.textContent = '';\n  }\n}\n\nfunction validate({ rate, email, review }) {\n  const errors = {\n    isInvalid: false,\n  };\n\n  if (!rate) {\n    errors.isInvalid = true;\n    errors.rate = 'Please select a rating';\n  }\n\n  if (!email) {\n    errors.isInvalid = true;\n    errors.email = 'Please enter an email';\n  }\n\n  if (!emailRegexp.test(email)) {\n    errors.isInvalid = true;\n    errors.email = 'Please enter a valid email';\n  }\n\n  if (!review) {\n    errors.isInvalid = true;\n    errors.review = 'Please enter a review';\n  }\n  \n  return errors;\n}\n\nexport { validate, handleValidationErrors };\n","import { hideLoader, showLoader } from '../helpers/loader';\nimport { showError } from '../helpers/toaster';\nimport renderLoader from '../renderers/render-loader';\nimport { exercisesApi } from '../services/exercises-api';\nimport { validate, handleValidationErrors } from './validation-handler';\n\nexport default async function submitForm(e, onSuccess) {\n  e.preventDefault();\n\n  const formData = new FormData(e.target);\n  const data = {\n    rate: Number(formData.get('rate')),\n    email: formData.get('email'),\n    review: formData.get('review'),\n  };\n\n  const validarionResult = validate(data);\n\n  handleValidationErrors(validarionResult, e.target);\n  if (validarionResult.isInvalid) return;\n  e.target.querySelector('[type=\"submit\"]').disabled = true;\n  \n  renderLoader(e.target);\n  try {\n    showLoader(e.target);\n    const resp = await exercisesApi.updateExerciseRating(data);\n    hideLoader(e.target);\n    onSuccess();\n  } catch (error) {\n    console.log(error);\n    showError(\"Something went wrong. Please try again later.\");\n    hideLoader(e.target);\n    e.target.querySelector('[type=\"submit\"]').disabled = false;\n  }\n}\n","export default function handleSetRating (e) {\n    const rating = e.target.closest('.rating');\n    if (!rating) return;\n\n    const ratingInputs = rating.querySelectorAll('[name=\"rate\"]');\n    const ratingLabel = rating.parentElement.firstElementChild;\n\n    ratingInputs.forEach((input) => {\n        if (input.checked) {\n            ratingLabel.textContent = input.value + '.0';        \n        }\n    });\n}\n","import { hideLoader, showLoader } from '../helpers/loader';\nimport { showSuccess, showError } from '../helpers/toaster';\nimport { exercisesApi } from '../services/exercises-api';\nimport { exerciseDetailsMarkup } from '../templates';\nimport handleFavorites from './add-favorites-handler';\nimport submitForm from './rating-modal-handler';\nimport handleSetRating from './rating-select-handler';\nimport renderLoader from '../renderers/render-loader';\n\nconst popUpState = {\n  detailsPopup: false,\n  ratingPopup: false,\n};\n\nconst stopPropagation = e => e.stopPropagation();\n\nconst handleRatingPopup = (ratingPopup, { closeCallback, submitCallback }) => {\n  const closeButton = ratingPopup.querySelector('.modal__close-btn');\n  const ratingForm = ratingPopup.querySelector('.give_a_rating');\n  const ratingFieldset = ratingPopup.querySelector('.rating');\n\n  ratingForm.setAttribute('novalidate', true);\n\n  ratingFieldset.addEventListener('click', e => {\n    handleSetRating(e);\n  });\n\n  closeButton.addEventListener('click', () => {\n    closeCallback();\n  });\n  ratingForm.addEventListener('submit', e => {\n    e.preventDefault();\n    submitCallback(e);\n  });\n};\n\nconst closeDetailsPopup = backdrop => {\n  popUpState.detailsPopup = false;\n  popUpState.ratingPopup = false;\n  backdrop?.classList.add('is-hidden');\n  backdrop?.querySelector('[data-modal]')?.remove();\n  backdrop?.querySelector('.exercise-modal')?.remove();\n  document.documentElement.classList.remove('no-scroll');\n};\n\nconst closeRatingPopup = (backdrop, ratingPopup, detailsPopup) => {\n  ratingPopup.remove();\n  backdrop.querySelector('[data-modal]')?.remove();\n  popUpState.ratingPopup = false;\n  backdrop.append(detailsPopup);\n};\n\nconst handleBackdropClickAndEsc = (backdrop, ratingPopup, detailsPopup) => {\n  switch (true) {\n    case popUpState.detailsPopup && !popUpState.ratingPopup:\n      closeDetailsPopup(backdrop);\n      return;\n    case popUpState.detailsPopup && popUpState.ratingPopup:\n      closeRatingPopup(backdrop, ratingPopup, detailsPopup);\n      return;\n    default:\n      closeDetailsPopup(backdrop);\n      return;\n  }\n};\n\nconst handleListeners = (detailsPopupHtml, data, backdrop) => {\n  backdrop.insertAdjacentHTML('beforeend', detailsPopupHtml);\n\n  const detailsPopup = backdrop.querySelector('.exercise-modal');\n  const detailsCloseButton = backdrop.querySelector('.exercise-card-close-btn');\n  const ratingButton = backdrop.querySelector('.add-rating-btn');\n  const favoriteButton = backdrop.querySelector('.add-favorites-btn');\n\n  const ratingPopup = document\n    .querySelector('#modal-template')\n    .content.firstElementChild.cloneNode(true);\n\n  const closeIconPath = detailsCloseButton\n    .querySelector('use')\n    .getAttribute('href');\n  ratingPopup.querySelector('use').setAttribute('href', closeIconPath);\n\n  window.addEventListener('keydown', e => {\n    if (e.code !== 'Escape') return;\n    handleBackdropClickAndEsc(backdrop, ratingPopup, detailsPopup);\n  });\n\n  backdrop.addEventListener('click', () => {\n    handleBackdropClickAndEsc(backdrop, ratingPopup, detailsPopup);\n  });\n\n  detailsPopup.addEventListener('click', stopPropagation);\n  ratingPopup.addEventListener('click', stopPropagation);\n\n  detailsCloseButton.addEventListener('click', () => {\n    closeDetailsPopup(backdrop);\n  });\n\n  ratingButton.addEventListener('click', () => {\n    popUpState.ratingPopup = true;\n    backdrop?.querySelector('.exercise-modal')?.remove();\n    backdrop.append(ratingPopup);\n  });\n\n  favoriteButton.addEventListener('click', e => {\n    handleFavorites(data);\n  });\n\n  handleRatingPopup(ratingPopup, {\n    closeCallback: () => closeRatingPopup(backdrop, ratingPopup, detailsPopup),\n    submitCallback: e =>\n      submitForm(e, () => {\n        closeDetailsPopup(backdrop);\n        showSuccess('Thank you for your feedback!');\n      }),\n  });\n\n  document.documentElement.classList.add('no-scroll');\n  popUpState.detailsPopup = true;\n};\n\nasync function handleExercise(e) {\n  e.preventDefault();\n  if (\n    !e.target.closest('[data-id]') ||\n    e.target.closest('[data-delete]') ||\n    e.target.closest('[data-add]')\n  )\n    return;\n  const backdrop = document.querySelector('.exercise-modal-backdrop');\n  backdrop.classList.remove('is-hidden');\n\n  try {\n    const exerciseId = e.target.closest('[data-id]').dataset.id;\n\n    renderLoader(backdrop);\n    showLoader(backdrop);\n    const data = await exercisesApi.getExerciseById(exerciseId);\n    hideLoader(backdrop);\n    const detailsPopup = exerciseDetailsMarkup(data);\n    const modalElement = handleListeners(detailsPopup, data, backdrop);\n  } catch (err) {\n    console.error(err);\n    showError('Something went wrong. Please try again later.');\n    hideLoader(backdrop);\n  }\n}\n\nexport default handleExercise;\n","import { gallery } from '../services/gallery';\n\nfunction handlePagination({ target }) {\n  if (!target.hasAttribute('data-page')) return;\n\n  const page = parseInt(target.dataset.page);\n  gallery.changePage(page);\n}\n\nexport default handlePagination;\n","import { showError, showSuccess } from '../helpers/toaster';\nimport { exercisesApi } from '../services/exercises-api';\nimport { validate, handleValidationErrors } from './validation-handler';\n\nconst errorRef = document.querySelector('.footer-error');\n\nasync function handleSubscribe(e) {\n  e.preventDefault();\n  const formData = new FormData(e.currentTarget);\n  const data = {};\n  formData.forEach((value, key) => {\n    data[key] = value;\n  });\n\n  const { email } = validate({ email: data.subscribe });\n\n  if (email) {\n    errorRef.classList.remove('visually-hidden');\n  } else {\n    e.currentTarget.reset();\n    errorRef.classList.add('visually-hidden');\n    try {\n      const response = await exercisesApi.subscribe({\n        email: data.subscribe,\n      });\n      showSuccess(response.message);\n    } catch (error) {\n      showError(error.response.data.message);\n    }\n  }\n}\n\nexport default handleSubscribe;\n","import { elements } from '../elements';\n\nlet closeBtn;\nlet modal;\n\nfunction handlePolicyModal(e) {\n  if (e.target === elements.policyBtn) {\n    modal = document.querySelector('.js-policy-modal');\n    closeBtn = document.querySelector('.js-policy-modal-close');\n  }\n  if (e.target === elements.termsBtn) {\n    modal = document.querySelector('.js-terms-modal');\n    closeBtn = document.querySelector('.js-terms-modal-close');\n  }\n  toggleModal();\n  modal.addEventListener('click', handleBackdropClick);\n  closeBtn.addEventListener('click', toggleModal);\n  window.addEventListener('keydown', handleKeyDownClick);\n}\n\nfunction handleKeyDownClick(e) {\n  if (e.code === 'Escape') {\n    toggleModal();\n  }\n}\n\nfunction handleBackdropClick(e) {\n  if (e.target === modal) {\n    toggleModal();\n  }\n}\n\nfunction toggleModal() {\n  modal.classList.toggle('is-hidden');\n  document.documentElement.classList.toggle('no-scroll');\n  window.removeEventListener('keydown', handleKeyDownClick);\n}\n\nexport default handlePolicyModal;\n","import { elements } from '../elements';\nimport { gallery } from '../services/gallery';\n\nfunction handleSearch() {\n  const textTosearch = elements.searchForm.exercise.value.trim();\n  gallery.goSearch(textTosearch);\n}\n\nexport default handleSearch;\n","import { elements } from '../elements';\nimport { gallery } from '../services/gallery';\n\nfunction handleResetSearch() {\n  gallery.resetSearch();\n  elements.searchForm.elements.exercise.setAttribute('value', '');\n}\n\nexport default handleResetSearch;\n","function scrollToTopOrElement(target) {\n  if (target === 'top') {\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  } else {\n    const element = target;\n    if (element) {\n      const elementRect = element.getBoundingClientRect();\n      if (\n        elementRect.top >= 0 &&\n        elementRect.bottom <=\n          (window.innerHeight || document.documentElement.clientHeight)\n      ) {\n        return;\n      }\n      window.scrollBy({\n        top: elementRect.top - 20,\n        behavior: 'smooth',\n      });\n    }\n  }\n}\nexport default scrollToTopOrElement;\n","import scrollToTopOrElement from '../helpers/scroll.js';\nimport { elements } from '../elements.js';\nfunction handleScrollTop() {\n  scrollToTopOrElement('top');\n}\nfunction handleScrollTopBtnShow() {\n  const { scrollTopBtn } = elements;\n  if (window.scrollY < 100) {\n    scrollTopBtn.classList.replace(\n      'js-scroll-top-button-active',\n      'hide-scroll-top-button'\n    );\n    return;\n  } else {\n    // Show the button if scrolled down more than 100 pixels\n    scrollTopBtn.classList.replace(\n      'hide-scroll-top-button',\n      'js-scroll-top-button-active'\n    );\n  }\n  const scrollPosition =\n    document.documentElement.scrollTop || document.body.scrollTop;\n  const maxScroll =\n    document.documentElement.scrollHeight -\n    document.documentElement.clientHeight;\n  const percentageScrolled = (scrollPosition / maxScroll) * 100;\n\n  scrollTopBtn.style.background = `conic-gradient(rgba(244, 244, 244, 1) ${percentageScrolled}%, #242424 ${percentageScrolled}%)`;\n}\n\nexport { handleScrollTop, handleScrollTopBtnShow };\n","import { gallery } from '../services/gallery';\n\nasync function handleBackButton(e) {\n  gallery.goBack();\n}\nexport default handleBackButton;","import { favorites } from '../services/favorites-page';\n\nfunction handleFavoritePagination({ target }) {\n  if (!target.hasAttribute('data-page')) return;\n\n  const page = parseInt(target.dataset.page);\n  favorites.changePage(page);\n}\n\nexport default handleFavoritePagination;\n","import { elements } from '../elements';\nfunction handlerOpenMenu(evt) {\n  if (evt.currentTarget === elements.btnOpenBurger) {\n    elements.burgerMenu.classList.remove('is-hidden');\n    document.querySelector('html').classList.add('no-scroll');\n  }\n  if (evt.currentTarget === elements.btnCloseBurger) {\n    elements.burgerMenu.classList.add('is-hidden');\n    document.querySelector('html').classList.remove('no-scroll');\n  }\n}\nexport default handlerOpenMenu;\n","import { favorites } from '../services/favorites-page';\nimport { elements } from '../elements';\n\nfunction handleFavoritesRemove(e) {\n  e.preventDefault();\n  if (!e.target.closest('[data-delete]')) return;\n  const delEl = e.target.closest('[data-delete]');\n  const cardId = delEl.dataset.delete;\n  const pageName = elements.body.dataset.page;\n\n  if (pageName === 'home') {\n    const addEl = delEl.nextElementSibling;\n    delEl.classList.add('is-hidden');\n    addEl.classList.remove('is-hidden');\n    const isFavoritesId = favorites.isFavorite(cardId);\n    if (!isFavoritesId) return;\n    favorites.removeFavorite(cardId);\n  } else {\n    delEl.disabled = true;\n    delEl.closest('[data-id]').classList.add('unmounting')\n    setTimeout(() => {\n      favorites.removeFavorite(cardId);\n    }, 250);\n  }\n}\n\nexport default handleFavoritesRemove;\n","import { favorites } from '../services/favorites-page';\nimport { exercisesApi } from '../services/exercises-api';\n\nasync function handlerAddToFavoritesBtn(e) {\n  e.preventDefault();\n  if (!e.target.closest('[data-add]')) return;\n  const addEl = e.target.closest('[data-add]');\n  const delEl = addEl.previousElementSibling;\n  const cardId = addEl.dataset.add;\n  const isFavoritesId = favorites.isFavorite(cardId);\n  if (isFavoritesId) return;\n  const data = exercisesApi\n    .getExerciseById(cardId)\n    .then(data => favorites.addFavorite(data));\n\n  addEl.classList.add('is-hidden');\n  delEl.classList.remove('is-hidden');\n}\nexport default handlerAddToFavoritesBtn;\n","import { gallery } from '../services/gallery';\n\nconst cardsQuantity = {\n  mobile: { subfilters: 9, exercises: 8, favorites: 8 },\n  tablet: { subfilters: 12, exercises: 10, favorites: 10 },\n  desktop: { subfilters: 12, exercises: 10, favorites: 999 },\n};\n\nlet initialDevice = convertSizeToType(window.screen.width);\n\nconst resizeObserver = new ResizeObserver(entry => {\n  let currentDevice = convertSizeToType(\n    entry[0].devicePixelContentBoxSize[0].inlineSize\n  );\n  if (initialDevice !== currentDevice) {\n    initialDevice = currentDevice;    \n    gallery.refreshLimits(cardsQuantity[currentDevice]);    \n  }\n});\n\nfunction getDeviseType() {\n  let key = 'desktop';\n  if (window.screen.width < 768) {\n    key = 'mobile';\n  }\n  if (window.screen.width >= 768 && window.screen.width < 1440) {\n    key = 'tablet';\n  }\n  return cardsQuantity[key];\n}\n\nfunction convertSizeToType(size) {\n  let key = 'desktop';\n  if (size < 768) {\n    key = 'mobile';\n  }\n  if (size >= 768 && size < 1440) {\n    key = 'tablet';\n  }\n  return key;\n}\n\nexport { cardsQuantity, getDeviseType, resizeObserver };\n","import throttle from 'lodash.throttle';\n\nimport { elements } from '../elements';\nimport { renderExercises, renderQuote, renderSubfilters } from '../renderers';\nimport { exercisesApi } from './exercises-api';\nimport { renderPagination } from '../helpers/pagination';\nimport {\n  handleBackButton,\n  handleExercise,\n  handleFavoritesRemove,\n  handleFilter,\n  handlePagination,\n  handlePolicyModal,\n  handleResetSearch,\n  handleSearch,\n  handleSubfilter,\n  handleSubscribe,\n  handlerAddToFavoritesBtn,\n} from '../handlers';\nimport scrollToTopOrElement from '../helpers/scroll';\nimport { getDeviseType } from '../helpers/screen-resolution';\nimport { common } from '../common';\n\nclass Gallery {\n  #state;\n  #filter;\n  #subfiltersPage;\n  #subfilter;\n  #searchQuery;\n  #exercisesPage;\n  #limits;\n\n  constructor({\n    state,\n    filter,\n    subfiltersPage,\n    subfilter,\n    searchQuery,\n    exercisesPage,\n    limits,\n  }) {\n    this.#state = state;\n    this.#filter = filter;\n    this.#subfiltersPage = subfiltersPage;\n    this.#subfilter = subfilter;\n    this.#searchQuery = searchQuery;\n    this.#exercisesPage = exercisesPage;\n    this.#limits = limits;\n  }\n\n  #saveStats() {\n    sessionStorage.setItem(\n      common.SS_KEY_FILTERS,\n      JSON.stringify({\n        state: this.#state,\n        filter: this.#filter,\n        subfiltersPage: this.#subfiltersPage,\n        subfilter: this.#subfilter,\n        searchQuery: this.#searchQuery,\n        exercisesPage: this.#exercisesPage,\n      })\n    );\n  }\n\n  #showExercisesGallery(subfilter) {\n    elements.gallery.dataset.cards = 'exercises';\n    elements.backBtn.classList.remove('back-button-hidden');\n    elements.searchForm.classList.remove('search-form-hidden');\n    elements.gallerySubtitle.innerHTML = `<span class=\"exercises-title\">&nbsp;/</span><h3 class=\"exercises-subtitle\">${subfilter}</h3>`;\n\n    elements.gallery.addEventListener('click', handleExercise);\n    elements.backBtn.addEventListener('click', handleBackButton);\n    elements.gallery.addEventListener('click', handlerAddToFavoritesBtn);\n    elements.gallery.addEventListener('click', handleFavoritesRemove);\n    elements.searchForm.addEventListener(\n      'input',\n      throttle(handleSearch, 1000, {\n        leading: false,\n        trailing: true,\n      })\n    );\n    elements.resetSearchForm.addEventListener('click', handleResetSearch);\n    elements.gallery.removeEventListener('click', handleSubfilter);\n    elements.searchForm.reset();\n    elements.searchForm.elements.exercise.setAttribute(\n      'value',\n      this.#searchQuery\n    );\n  }\n\n  #showSubfiltersGallery() {\n    elements.gallery.dataset.cards = 'subfilters';\n    elements.backBtn.classList.add('back-button-hidden');\n    elements.searchForm.classList.add('search-form-hidden');\n    elements.gallerySubtitle.innerHTML = '';\n\n    elements.gallery.addEventListener('click', handleSubfilter);\n    elements.gallery.removeEventListener('click', handleExercise);\n    elements.backBtn.removeEventListener('click', handleBackButton);\n    elements.gallery.removeEventListener('click', handlerAddToFavoritesBtn);\n    elements.gallery.removeEventListener('click', handleFavoritesRemove);\n    elements.searchForm.removeEventListener(\n      'input',\n      throttle(handleSearch, 1000, {\n        leading: false,\n        trailing: true,\n      })\n    );\n    elements.resetSearchForm.removeEventListener('click', handleResetSearch);\n  }\n\n  #setFilterActive(newFilter, prevFilter) {\n    [...elements.filter.children].forEach(({ firstElementChild }) => {\n      switch (firstElementChild.dataset.filter) {\n        case newFilter:\n          firstElementChild.classList.add('filter-button-active');\n          break;\n        case prevFilter:\n          firstElementChild.classList.remove('filter-button-active');\n          break;\n      }\n    });\n  }\n\n  load() {\n    renderQuote();\n    exercisesApi.limit = this.#limits[this.#state];\n    exercisesApi.filter = this.#filter;\n\n    switch (this.#state) {\n      case 'subfilters':\n        exercisesApi.page = this.#subfiltersPage;\n        renderSubfilters();\n        this.#showSubfiltersGallery();\n        break;\n      case 'exercises':\n        exercisesApi.subFilter = this.#subfilter;\n        exercisesApi.keyword = this.#searchQuery;\n        exercisesApi.page = this.#exercisesPage;\n\n        elements.searchForm.elements.exercise.setAttribute(\n          'value',\n          this.#searchQuery\n        );\n\n        renderExercises();\n        this.#showExercisesGallery(this.#subfilter);\n        break;\n    }\n\n    elements.pagination.addEventListener('click', handlePagination);\n\n    if (elements.body.dataset.page === 'home') {\n      this.#setFilterActive(this.#filter);\n      elements.filter.addEventListener('click', handleFilter);\n      elements.subscribeForm.addEventListener('submit', handleSubscribe);\n      elements.policyBtn.addEventListener('click', handlePolicyModal);\n      elements.termsBtn.addEventListener('click', handlePolicyModal);\n    }\n\n    elements.navHome.forEach(elem => elem.setAttribute('href', \"javascript:void(0)\"));\n  }\n\n  changeFilter(newFilter) {\n    exercisesApi.filter = newFilter;\n    exercisesApi.page = 1;\n    exercisesApi.limit = this.#limits.subfilters;\n    renderSubfilters(renderPagination);\n\n    this.#setFilterActive(newFilter, this.#filter);\n    this.#state = 'subfilters';\n    this.#filter = newFilter;\n    this.#subfiltersPage = 1;\n    this.#showSubfiltersGallery();\n    this.#saveStats();\n  }\n\n  goExercises(subfilter) {\n    exercisesApi.subFilter = subfilter;\n    exercisesApi.keyword = '';\n    exercisesApi.page = 1;\n    exercisesApi.limit = this.#limits.exercises;\n    renderExercises(renderPagination);\n\n    this.#state = 'exercises';\n    this.#subfilter = subfilter;\n    this.#searchQuery = '';\n    this.#exercisesPage = 1;\n    this.#showExercisesGallery(subfilter);\n    this.#saveStats();\n\n    scrollToTopOrElement(elements.gallerySubtitle);\n  }\n\n  goBack() {\n    exercisesApi.page = this.#subfiltersPage;\n    exercisesApi.limit = this.#limits.subfilters;\n    renderSubfilters(renderPagination);\n\n    this.#state = 'subfilters';\n    this.#showSubfiltersGallery();\n    this.#saveStats();\n  }\n\n  changePage(newPage) {\n    exercisesApi.page = newPage;\n\n    switch (this.#state) {\n      case 'subfilters':\n        renderSubfilters();\n        this.#subfiltersPage = newPage;\n        break;\n      case 'exercises':\n        renderExercises();\n        this.#exercisesPage = newPage;\n        break;\n    }\n\n    this.#saveStats();\n    scrollToTopOrElement(elements.gallerySubtitle);\n  }\n\n  goSearch(query) {\n    if (query === this.#searchQuery) return;\n    exercisesApi.keyword = query;\n    exercisesApi.page = 1;\n    renderExercises(renderPagination);\n\n    this.#searchQuery = query;\n    this.#exercisesPage = 1;\n    this.#saveStats();\n  }\n\n  resetSearch() {\n    if (this.#searchQuery === '') return;\n    exercisesApi.keyword = '';\n    exercisesApi.page = 1;\n    renderExercises(renderPagination);\n\n    this.#searchQuery = '';\n    this.#exercisesPage = 1;\n    this.#saveStats();\n  }\n\n  refreshLimits(limits) {\n    if (limits[this.#state] !== this.#limits[this.#state]) {\n      exercisesApi.limit = limits[this.#state];\n      switch (this.#state) {\n        case 'subfilters':\n          renderSubfilters();\n          break;\n        case 'exercises':\n          renderExercises();\n          break;\n      }\n    }\n\n    this.#limits = limits;\n  }\n}\n\nconst gallery = new Gallery({\n  ...(JSON.parse(sessionStorage.getItem(common.SS_KEY_FILTERS)) ?? {\n    state: 'subfilters',\n    filter: 'muscles',\n    subfiltersPage: 1,\n    subfilter: '',\n    searchQuery: '',\n    exercisesPage: 1,\n  }),\n  limits: getDeviseType(),\n});\n\nexport { gallery };\n","import { common } from '../common';\nimport { elements } from '../elements';\nimport { renderPagination } from '../helpers/pagination';\nimport { showError } from '../helpers/toaster';\nimport { exercisesApi } from '../services/exercises-api';\nimport { gallery } from '../services/gallery';\nimport { exercisesMarkup, notFoundGalleryMarkup } from '../templates';\n\nasync function renderExercises() {\n  elements.gallery.classList.add('unmounting');\n  try {\n    const { results, page, totalPages } = await exercisesApi.getExercises();\n    if (!totalPages) {\n      elements.gallery.innerHTML = notFoundGalleryMarkup();\n      renderPagination(0, 0);\n      return;\n    }\n    if (page > totalPages) {\n      gallery.changePage(totalPages);\n      return;\n    }\n    elements.gallery.innerHTML = exercisesMarkup(results);\n    renderPagination(Number(page), totalPages);\n  } catch (error) {\n    showError(common.ERROR_MESSAGE);\n    elements.gallery.innerHTML = notFoundGalleryMarkup();\n    renderPagination(0, 0);\n  } finally {\n    elements.gallery.classList.remove('unmounting');\n  }\n}\n\nexport default renderExercises;\n","import { common } from '../common';\nimport { elements } from '../elements';\nimport { renderPagination } from '../helpers/pagination';\nimport { showError } from '../helpers/toaster';\nimport { exercisesApi } from '../services/exercises-api';\nimport { gallery } from '../services/gallery';\nimport { notFoundGalleryMarkup, subfiltersMarkup } from '../templates';\n\nasync function renderSubfilters() {\n  elements.gallery.classList.add('unmounting');\n  try {\n    const { results, page, totalPages } = await exercisesApi.getFilters();\n    if (!totalPages) {\n      elements.gallery.innerHTML = notFoundGalleryMarkup();\n      renderPagination(0, 0);\n      return;\n    }\n    if (page > totalPages) {\n      gallery.changePage(totalPages);\n      return;\n    }\n    elements.gallery.innerHTML = subfiltersMarkup(results);\n    renderPagination(Number(page), totalPages);\n  } catch (error) {\n    showError(common.ERROR_MESSAGE);\n    elements.gallery.innerHTML = notFoundGalleryMarkup();\n    renderPagination(0, 0);\n  } finally {\n    elements.gallery.classList.remove('unmounting');\n  }\n}\n\nexport default renderSubfilters;\n","import { elements } from '../elements';\nimport { common } from '../common';\nimport { exercisesApi } from '../services/exercises-api';\nimport { quoteMarkup } from '../templates';\n\nasync function renderQuote(page) {\n   \n    const date = new Date();\n    const today = `${date.getDate()}/${date.getMonth()}/${date.getFullYear()}`\n    let quote;\n        \n        \n    const parseQuote = JSON.parse(localStorage.getItem(common.LS_KEY_QUOTE));\n    if (parseQuote) {\n       \n        if (today !== parseQuote.date) {\n\n            try {\n                quote = await exercisesApi.getQuote();\n\n                quote.quote = quote.quote || common.BASE_QUOTE.quote;\n                quote.author = quote.author || \"Unknown\"\n\n            } catch (error) {\n                elements.quote.insertAdjacentHTML(\"beforeend\", quoteMarkup(common.BASE_QUOTE, page))\n                return;\n            }\n\n           if (quote.author !== \"Unknown\" && quote.quote !== common.BASE_QUOTE.quote) {\n                quote.date = today;\n                localStorage.setItem(common.LS_KEY_QUOTE, JSON.stringify(quote))\n            }\n\n            elements.quote.insertAdjacentHTML(\"beforeend\", quoteMarkup(quote, page))\n\n        } else {\n            elements.quote.insertAdjacentHTML(\"beforeend\", quoteMarkup(parseQuote, page))\n        }\n        \n    } else {\n\n         try {\n                quote = await exercisesApi.getQuote();\n             \n                quote.quote = quote.quote || common.BASE_QUOTE.quote;\n                quote.author = quote.author || \"Unknown\"\n\n            } catch (error) {\n                elements.quote.insertAdjacentHTML(\"beforeend\", quoteMarkup(common.BASE_QUOTE, page))\n                return;\n            }\n        \n        if (quote.author !== \"Unknown\" && quote.quote !== common.BASE_QUOTE.quote) {\n            quote.date = today;\n            localStorage.setItem(common.LS_KEY_QUOTE, JSON.stringify(quote))\n        }\n    \n        elements.quote.insertAdjacentHTML(\"beforeend\", quoteMarkup(quote, page))\n    }\n\n}\n\nexport default renderQuote;","import { elements } from '../elements';\nimport { renderPagination } from '../helpers/pagination';\nimport { exercisesMarkup } from '../templates';\n\nfunction renderFavorites(array, page, totalPages) {\n  elements.gallery.classList.add('unmounting');\n  if (!array.length) {\n    elements.gallery.innerHTML =\n      \"<li class='list-empty'><p>It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.</p></li>\";\n  } else {\n    elements.gallery.innerHTML = exercisesMarkup(array, 'favorites');\n  }\n  renderPagination(page, totalPages);\n  elements.gallery.classList.remove('unmounting');\n}\n\nexport default renderFavorites;\n","import { common } from '../common';\nimport { renderFavorites, renderQuote } from '../renderers';\nimport { elements } from '../elements';\nimport {\n  handleExercise,\n  handleFavoritePagination,\n  handleFavoritesRemove,\n} from '../handlers';\nimport scrollToTopOrElement from '../helpers/scroll';\nimport { getDeviseType } from '../helpers/screen-resolution';\n\nclass Favorites {\n  #exercises;\n  #page;\n  #limit;\n  #navPage;\n\n  constructor(exercises, page, limit, navPage) {\n    this.#exercises = exercises;\n    this.#page = page;\n    this.#limit = limit;\n    this.#navPage = navPage;\n  }\n\n  #savePage() {\n    sessionStorage.setItem(common.SS_KEY_FAVORITES, this.#page);\n  }\n\n  #saveExercises() {\n    localStorage.setItem(\n      common.LS_KEY_FAVORITES,\n      JSON.stringify(this.#exercises)\n    );\n  }\n\n  #renderList() {\n    const totalPages = Math.ceil(this.#exercises.length / this.#limit);\n\n    if (totalPages && this.#page > totalPages) {\n      this.#page = totalPages;\n    }\n\n    const array = [...this.#exercises].splice(\n      (this.#page - 1) * this.#limit,\n      this.#limit\n    );\n\n    renderFavorites(array, this.#page, totalPages);\n    this.#savePage();\n  }\n\n  load() {\n    renderQuote('favorite');\n    this.#renderList();\n    elements.gallery.addEventListener('click', handleExercise);\n    elements.gallery.addEventListener('click', handleFavoritesRemove);\n    elements.pagination.addEventListener('click', handleFavoritePagination);\n\n    elements.navFavorites.forEach(elem => elem.setAttribute('href', \"javascript:void(0)\"));\n  }\n\n  isFavorite(id) {\n    return this.#exercises.some(obj => obj._id === id);\n  }\n\n  removeFavorite(id) {\n    const index = this.#exercises.map(obj => obj._id).indexOf(id);\n    this.#exercises.splice(index, 1);\n    this.#saveExercises();\n\n    this.#navPage === 'favorites' && this.#renderList();\n  }\n\n  addFavorite(obj) {\n    this.#exercises.push(obj);\n    this.#saveExercises();\n\n    this.#navPage === 'favorites' && this.#renderList();\n  }\n\n  changePage(newPage) {\n    this.#page = newPage;\n    this.#renderList();\n    scrollToTopOrElement(elements.favoritesAnchor);\n  }\n\n  refreshLimits(limits) {\n    if (limits.favorites === this.#limit) return;\n\n    this.#limit = limits.favorites;\n    this.#renderList();\n  }\n}\n\nconst favorites = new Favorites(\n  JSON.parse(localStorage.getItem(common.LS_KEY_FAVORITES)) ?? [],\n  parseInt(sessionStorage.getItem(common.SS_KEY_FAVORITES)) || 1,\n  getDeviseType().favorites,\n  elements.body.dataset.page\n);\n\nexport { favorites };\n"],"names":["common","elements","subfiltersMarkup","array","filter","name","imgURL","removeIcon","starIcon","iconArrowPath","iconRunningManPath","heartIcon","exercisesMarkup","page","_id","bodyPart","target","rating","burnedCalories","time","removeIconPath","favorites","heartIconPath","starIconPath","paginationMarkup","activePage","total","arrElPagin","arrNumPagin","currentPage","isActivePage","startPage","endPage","current","active","closeIcon","noImgIcon","exerciseDetailsMarkup","equipment","gifUrl","description","popularity","newRating","isId","parsedData","obj","i","quoteMarkup","author","quote","desktopImage","desktopImageRetina","tabletImage","tabletImageRetina","mobileImage","mobileImageRetina","notFoundGalleryMarkup","renderPagination","totalPages","iziToast","showError","message","showSuccess","BASE_URL","filters","ExercisesAPI","subFilter","keyword","limit","axios","id","response","rate","email","review","exercisesApi","handleFilter","e","gallery","handleSubfilter","subfilter","showLoader","container","hideLoader","handleFavorites","data","favorite","loaderMarkup","renderLoader","emailRegexp","handleValidationErrors","errors","form","ratingFieldset","emailLabel","reviewLabel","ratingError","emailError","reviewError","validate","submitForm","onSuccess","formData","validarionResult","resp","error","handleSetRating","ratingInputs","ratingLabel","input","popUpState","stopPropagation","handleRatingPopup","ratingPopup","closeCallback","submitCallback","closeButton","ratingForm","closeDetailsPopup","backdrop","_a","_b","closeRatingPopup","detailsPopup","handleBackdropClickAndEsc","handleListeners","detailsPopupHtml","detailsCloseButton","ratingButton","favoriteButton","closeIconPath","handleExercise","exerciseId","modalElement","err","handlePagination","errorRef","handleSubscribe","value","key","closeBtn","modal","handlePolicyModal","toggleModal","handleBackdropClick","handleKeyDownClick","handleSearch","textTosearch","handleResetSearch","scrollToTopOrElement","element","elementRect","handleScrollTop","handleScrollTopBtnShow","scrollTopBtn","scrollPosition","maxScroll","percentageScrolled","handleBackButton","handleFavoritePagination","handlerOpenMenu","evt","handleFavoritesRemove","delEl","cardId","addEl","handlerAddToFavoritesBtn","cardsQuantity","initialDevice","convertSizeToType","resizeObserver","entry","currentDevice","getDeviseType","size","Gallery","state","subfiltersPage","searchQuery","exercisesPage","limits","__privateAdd","_saveStats","_showExercisesGallery","_showSubfiltersGallery","_setFilterActive","_state","_filter","_subfiltersPage","_subfilter","_searchQuery","_exercisesPage","_limits","__privateSet","renderQuote","__privateGet","renderSubfilters","__privateMethod","showSubfiltersGallery_fn","renderExercises","showExercisesGallery_fn","setFilterActive_fn","elem","newFilter","saveStats_fn","newPage","query","throttle","prevFilter","firstElementChild","results","date","today","parseQuote","renderFavorites","Favorites","exercises","navPage","_savePage","_saveExercises","_renderList","_exercises","_page","_limit","_navPage","renderList_fn","index","saveExercises_fn","savePage_fn"],"mappings":"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"}