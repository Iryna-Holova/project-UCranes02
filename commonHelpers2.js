var U=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var l=(e,t,s)=>(U(e,t,"read from private field"),s?s.call(e):t.get(e)),h=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},c=(e,t,s,i)=>(U(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s);var d=(e,t,s)=>(U(e,t,"access private method"),s);import{r as le,e as r,a as ve}from"./assets/elements-9a858705.js";import{a as q,i as X,l as V}from"./assets/vendor-80510813.js";const B="https://your-energy.b.goit.study/api/",be={bodypart:"Body parts",muscles:"Muscles",equipment:"Equipment"};class ye{constructor({filter:t="muscles",subFilter:s="",keyword:i="",page:a=1,limit:n=8}){this.filter=t,this.subFilter=s,this.keyword=i,this.page=a,this.limit=n,this.id=""}async getFilters(){return(await q.get(`${B}filters`,{params:{filter:be[this.filter],page:this.page,limit:this.limit}})).data}async getExercises(){return(await q.get(`${B}exercises`,{params:{[this.filter]:this.subFilter,keyword:this.keyword,page:this.page,limit:this.limit}})).data}async getExerciseById(t){const s=await q.get(`${B}exercises/${t}`);return this.id=t,s.data}async updateExerciseRating({rate:t,email:s,review:i}){return(await q.patch(`${B}exercises/${this.id}/rating`,{rate:t,email:s,review:i})).data}async getQuote(){return(await q.get(`${B}quote`)).data}async subscribe({email:t}){return(await q.post(`${B}subscription`,{email:t})).data}}const o=new ye({});function we(e){return e.map(({filter:t,name:s,imgURL:i})=>`<li class="exercises-item">
      <a data-subfilter="${s}" class="exercises-item-container" href="">
        <img class="exercises-item-image" src="${i}" alt="${s}" />
        <div class="exercises-proprties-container">
          <h4 class="exercises-item-name">${s}</h4>
          <p class="exercises-item-type">${t}</p>
        </div>
      </a>
    </li>`).join("")}function Ee(e,t){let s=[];if(t<=5)for(let i=1;i<=t;i+=1)s.push(`<li class="elm"><button type="button" class="pagination-el ${i===e?"active":"unactive"}" data-page="${i}" >${i}</button></li>`);else{const i=Math.max(Math.min(e-2,t-4),1),a=Math.min(i+4,t);for(let n=1;n<=t;n+=1)n>=i&&n<=a?s.push(`<li class="elm"><button type="button" class="pagination-el ${n===e?"active":"unactive"}" data-page="${n}" >${n}</button></li>`):s.push(`<li class="elm" style="display: none;"><button type="button" class="pagination-el ${n===e?"active":"unactive"}" data-page="${n}" >${n}</button></li>`)}return s.join("")}const ce="/project-UCranes02/assets/icons-0389f68f.svg#icon-heart",Se="/project-UCranes02/assets/icons-0389f68f.svg#icon-close";function xe({bodyPart:e,equipment:t,gifUrl:s,name:i,target:a,description:n,rating:u,burnedCalories:f,time:m,popularity:$,_id:me}){let C=Math.round(u),D=!1;const Z=JSON.parse(localStorage.getItem("favorites"));return Z&&(D=Z.some(J=>J._id===me)),`
  <div class="exercise-modal-backdrop" >
    <div class="exercise-modal">
        <button class="exercise-card-close-btn" type="button">
            <svg class="exercise-card-close-icon" aria-label="Modal window close icon">
                <use href="${Se}"></use>
            </svg>
        </button>
        <div class="exercise-card">
            <div class="exercise-card-img-wrap">
                <img src=${s} alt="">
            </div>
                <div class="exercise-card-info">
                    <div>
                        <h2 class="exercise-card-title">${i}</h2>
                        ${C?` <div class="exercise-card-rating"><span>${C?C+".0":""}</span>
                        ${[1,2,3,4,5].map(J=>`
                        <svg aria-label="Rating star" width="16" height="16" stroke="var(--black)" fill=${C>=J?"var(--yellow)":"var(--white-transparent-20)"} >
                            <use href="/img/icons.svg#icon-star"></use>
                        </svg>`).join("")}
                          </div>`:""}
                            
                        <ul class="exercise-card-details-list">
                        ${a?`<li class="exercise-card-details-item">
                        <p class="details-name">Target</p>
                        <p class="details-value">${a}</p>
                        </li>`:""}
                        ${e?`<li class="exercise-card-details-item">
                              <p class="details-name">Body Part</p>
                              <p class="details-value">${e}</p>
                          </li>`:""}
                          ${t?`<li class="exercise-card-details-item">
                              <p class="details-name">Equipment</p>
                              <p class="details-value">${t}</p>
                          </li>`:""}
                          ${$?`<li class="exercise-card-details-item">
                              <p class="details-name">Popular</p>
                              <p class="details-value">${$}</p>
                          </li>`:""}
                          ${f&&m?`<li class="exercise-card-details-item">
                              <p class="details-name">Burned calories</p>
                              <p class="details-value">${f}/${m} min</p>
                          </li>`:""}
                         
                        </ul>
                        <p class="exercise-card-description">${n||""}</p>
                    </div>
                    <div class="exercise-card-btn-group">
                        <button class="card-btn add-favorites-btn" ${D?'style="padding: 12px 9px"':""}>
                            <span>${D?"Remove from favorites":"Add to favorites"}</span>
                            <svg class="favorites-icon" aria-label="Favorite icon" width="20" height="20" >
                                <use href="${D?`${le}`:`${ce}heart`}"></use>
                            </svg>
                        </button>
                        <button class="card-btn add-rating-btn">Give a rating</button>
                </div>
            </div>
        </div>
    </div>
</div>`}function F({author:e,quote:t}){return`
          <p class="text-quote list-item-text">${t}</p>
          <p class="autor-quote list-item-text">${e}</p>
        `}async function I(e){const t=await o.getExercises();r.gallery.innerHTML=ve(t.results),e&&e(Number(t.page),t.totalPages)}X.settings({timeout:5e3,resetOnHover:!0,position:"bottomCenter",transitionIn:"flipInX",transitionOut:"flipOutX",theme:"dark",backgroundColor:"#242424"});function Q(e){X.show({overlay:!0,overlayClose:!0,progressBarColor:"#BF5858",message:e})}function de(e){X.show({progressBarColor:"#4FAC40",message:e})}const L={SS_KEY_FILTERS:"user filters",LS_KEY_QUOTE:"quote",BASE_QUOTE:{author:"Tom Brady",quote:"A lot of times I find that people who are blessed with the most talent don't ever develop that attitude, and the ones who aren't blessed in that way are the most competitive and have the biggest heart."},ERROR_MESSAGE:"Something goes wrong!"};async function M(e){try{const t=await o.getFilters();r.gallery.innerHTML=we(t.results),e&&e(Number(t.page),t.totalPages)}catch{Q(L.ERROR_MESSAGE),r.gallery.innerHTML="<p>Nothing was found<p/>"}}async function Le(){const e=new Date,t=`${e.getDate()}/${e.getMonth()}/${e.getFullYear()}`;let s;const i=JSON.parse(localStorage.getItem(L.LS_KEY_QUOTE));if(i)if(t!==i.date){try{if(s=await o.getQuote(),!s.author||!s.quote)throw Error("empty data")}catch(a){r.quote.insertAdjacentHTML("beforeend",F(L.BASE_QUOTE)),console.log(a.message);return}s.date=t,localStorage.setItem(L.LS_KEY_QUOTE,JSON.stringify(s)),r.quote.insertAdjacentHTML("beforeend",F(s))}else r.quote.insertAdjacentHTML("beforeend",F(i));else{try{if(s=await o.getQuote(),!s.author||!s.quote)throw Error("empty data")}catch(a){r.quote.insertAdjacentHTML("beforeend",F(L.BASE_QUOTE)),console.log(a.message);return}s.date=t,localStorage.setItem(L.LS_KEY_QUOTE,JSON.stringify(s)),r.quote.insertAdjacentHTML("beforeend",F(s))}}function v(e,t){r.pagination.innerHTML=Ee(e,t)}function K(e){if(e==="top")window.scrollTo({top:0,behavior:"smooth"});else{const t=e;if(t){const s=t.getBoundingClientRect();if(s.top>=0&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)){console.log("el is in viewport");return}window.scrollBy({top:s.top-20,behavior:"smooth"})}}}const ue={mobile:{subfilters:9,exercises:8,favorites:8},tablet:{subfilters:12,exercises:10,favorites:10},desktop:{subfilters:12,exercises:10,favorites:999}};let W=pe(window.screen.width);const ke=new ResizeObserver(e=>{let t=pe(e[0].devicePixelContentBoxSize[0].inlineSize);W!==t&&(W=t,P.refreshLimits(ue[t]))});function $e(){let e="desktop";return window.screen.width<768&&(e="mobile"),window.screen.width>=768&&window.screen.width<1440&&(e="tablet"),ue[e]}function pe(e){let t="desktop";return e<768&&(t="mobile"),e>=768&&e<1440&&(t="tablet"),t}var p,b,y,k,w,g,E,S,T,O,z,_,H,R,G;class Te{constructor({state:t,filter:s,subfiltersPage:i,subfilter:a,searchQuery:n,exercisesPage:u,limits:f}){h(this,S);h(this,O);h(this,_);h(this,R);h(this,p,void 0);h(this,b,void 0);h(this,y,void 0);h(this,k,void 0);h(this,w,void 0);h(this,g,void 0);h(this,E,void 0);c(this,p,t),c(this,b,s),c(this,y,i),c(this,k,a),c(this,w,n),c(this,g,u),c(this,E,f)}load(){switch(Le(),o.limit=l(this,E)[l(this,p)],o.filter=l(this,b),l(this,p)){case"subfilters":o.page=l(this,y),M(v),d(this,_,H).call(this);break;case"exercises":o.subFilter=l(this,k),o.keyword=l(this,w),o.page=l(this,g),I(v),d(this,O,z).call(this,l(this,k));break}r.pagination.addEventListener("click",Re),r.body.dataset.page==="home"&&(d(this,R,G).call(this,l(this,b)),r.filter.addEventListener("click",Pe),r.subscribeForm.addEventListener("submit",Ce),r.policyBtn.addEventListener("click",re),r.termsBtn.addEventListener("click",re))}changeFilter(t){o.filter=t,o.page=1,o.limit=l(this,E).subfilters,M(v),d(this,R,G).call(this,t,l(this,b)),c(this,p,"subfilters"),c(this,b,t),c(this,y,1),d(this,_,H).call(this),d(this,S,T).call(this)}goExercises(t){o.subFilter=t,o.keyword="",o.page=1,o.limit=l(this,E).exercises,I(v),c(this,p,"exercises"),c(this,k,t),c(this,w,""),c(this,g,1),d(this,O,z).call(this,t),d(this,S,T).call(this),K(r.gallerySubtitle)}goBack(){o.page=l(this,y),o.limit=l(this,E).subfilters,M(v),c(this,p,"subfilters"),d(this,_,H).call(this),d(this,S,T).call(this)}changePage(t){switch(o.page=t,l(this,p)){case"subfilters":M(),c(this,y,t);break;case"exercises":I(),c(this,g,t);break}d(this,S,T).call(this),K(r.gallerySubtitle)}goSearch(t){o.keyword=t,o.page=1,I(v),c(this,w,t),c(this,g,1),d(this,S,T).call(this)}resetSearch(){o.keyword="",o.page=1,I(v),c(this,w,""),c(this,g,1),d(this,S,T).call(this)}refreshLimits(t){switch(this.limits=t,o.limit=l(this,E)[l(this,p)],l(this,p)){case"subfilters":M(v);break;case"exercises":I(v);break}}}p=new WeakMap,b=new WeakMap,y=new WeakMap,k=new WeakMap,w=new WeakMap,g=new WeakMap,E=new WeakMap,S=new WeakSet,T=function(){sessionStorage.setItem(L.SS_KEY_FILTERS,JSON.stringify({state:l(this,p),filter:l(this,b),subfiltersPage:l(this,y),subfilter:l(this,k),searchQuery:l(this,w),exercisesPage:l(this,g)}))},O=new WeakSet,z=function(t){r.gallery.dataset.cards="exercises",r.backBtn.classList.remove("back-button-hidden"),r.searchForm.classList.remove("search-form-hidden"),r.gallerySubtitle.innerHTML=`<span class="exercises-title">&nbsp;/</span><h3 class="exercises-subtitle">${t}</h3>`,r.gallery.addEventListener("click",ie),r.backBtn.addEventListener("click",oe),r.searchForm.addEventListener("input",V(ne,1e3,{leading:!1,trailing:!0})),r.gallery.removeEventListener("click",ee),r.searchForm.reset()},_=new WeakSet,H=function(){r.gallery.dataset.cards="subfilters",r.backBtn.classList.add("back-button-hidden"),r.searchForm.classList.add("search-form-hidden"),r.gallerySubtitle.innerHTML="",r.gallery.addEventListener("click",ee),r.gallery.removeEventListener("click",ie),r.backBtn.removeEventListener("click",oe),r.searchForm.removeEventListener("input",V(ne,1e3,{leading:!1,trailing:!0}))},R=new WeakSet,G=function(t,s){[...r.filter.children].forEach(({firstElementChild:i})=>{switch(i.dataset.filter){case t:i.classList.add("filter-button-active");break;case s:i.classList.remove("filter-button-active");break}})};const P=new Te({...JSON.parse(sessionStorage.getItem(L.SS_KEY_FILTERS))??{state:"subfilters",filter:"muscles",subfiltersPage:1,subfilter:"",searchQuery:"",exercisesPage:1},limits:$e()});function Pe(e){e.target.hasAttribute("data-filter")&&P.changeFilter(e.target.dataset.filter)}async function ee(e){if(e.preventDefault(),!e.target.closest("[data-subfilter]"))return;const{subfilter:t}=e.target.closest("[data-subfilter]").dataset;P.goExercises(t)}function qe(e){const t=localStorage.getItem("favorites"),s=JSON.parse(t),i=s.map(a=>a._id).indexOf(e);s.splice(i,1),localStorage.setItem("favorites",JSON.stringify(s))}function Be(e){const t=document.querySelector(".add-favorites-btn"),s=localStorage.getItem("favorites"),i=JSON.parse(s);if(s)i.some(a=>a._id===e._id)?(qe(e._id),t.style.padding="12px 16px",t.querySelector("span").textContent="Add to favorites",t.querySelector("use").setAttribute("href",ce)):(i.push(e),localStorage.setItem("favorites",JSON.stringify(i)),t.style.padding="12px 9px",t.querySelector("span").textContent="Remove from favorites",t.querySelector("use").setAttribute("href",le));else{const a=JSON.stringify([e]);localStorage.setItem("favorites",a)}}const Ie=/^\w+@[a-zA-Z_]+?.[a-zA-Z]{2,3}$/;function _e(e,t){const[s,i,a]=t.querySelectorAll(".users_rating, label"),[n,u,f]=t.querySelectorAll(".error");e.rate?(s.classList.add("invalid"),n.textContent=e.rate):(s.classList.remove("invalid"),n.textContent=""),e.email?(i.classList.add("invalid"),u.textContent=e.email):(i.classList.remove("invalid"),u.textContent=""),e.review?(a.classList.add("invalid"),f.textContent=e.review):(a.classList.remove("invalid"),f.textContent="")}function he({rate:e,email:t,review:s}){const i={isInvalid:!1};return e||(i.isInvalid=!0,i.rate="Please select a rating"),t||(i.isInvalid=!0,i.email="Please enter an email"),Ie.test(t)||(i.isInvalid=!0,i.email="Please enter a valid email"),s||(i.isInvalid=!0,i.review="Please enter a review"),i}async function Fe(e,t){e.preventDefault();const s=new FormData(e.target),i={rate:Number(s.get("rate")),email:s.get("email"),review:s.get("review")},a=he(i);if(_e(a,e.target),!a.isInvalid)try{const n=await o.updateExerciseRating(i);t()}catch(n){console.log(n),Q("Something went wrong. Please try again later.")}}function Me(e){const t=e.target.closest(".rating");if(!t)return;const s=t.querySelectorAll('[name="rate"]'),i=t.parentElement.firstElementChild;s.forEach(a=>{a.checked&&(i.textContent=a.value+".0")})}const x={detailsPopup:!1,ratingPopup:!1},te=e=>e.stopPropagation(),Ae=(e,{closeCallback:t,submitCallback:s})=>{const i=e.querySelector(".modal__close-btn"),a=e.querySelector(".give_a_rating"),n=e.querySelector(".rating");a.setAttribute("novalidate",!0),n.addEventListener("click",u=>{Me(u)}),i.addEventListener("click",()=>{t()}),a.addEventListener("submit",u=>{u.preventDefault(),s(u)})},j=e=>{x.detailsPopup=!1,x.ratingPopup=!1,e==null||e.remove(),document.documentElement.classList.remove("no-scroll")},ge=(e,t,s)=>{t.remove(),e.innerHTML="",x.ratingPopup=!1,e.append(s)},se=(e,t,s)=>{switch(!0){case(x.detailsPopup&&!x.ratingPopup):j(e);return;case(x.detailsPopup&&x.ratingPopup):ge(e,t,s);return;default:j(e);return}},Oe=(e,t)=>{const s=document.createElement("div");s.innerHTML=e;const i=s.querySelector(".exercise-modal-backdrop"),a=s.querySelector(".exercise-modal"),n=s.querySelector(".exercise-card-close-btn"),u=s.querySelector(".add-rating-btn"),f=s.querySelector(".add-favorites-btn"),m=document.querySelector("#modal-template").content.firstElementChild.cloneNode(!0);window.addEventListener("keydown",$=>{$.code==="Escape"&&se(i,m,a)}),i.addEventListener("click",()=>{se(i,m,a)}),a.addEventListener("click",te),m.addEventListener("click",te),n.addEventListener("click",()=>{j(i)}),u.addEventListener("click",()=>{x.ratingPopup=!0,i.innerHTML="",i.append(m)}),f.addEventListener("click",$=>{Be(t)}),Ae(m,{closeCallback:()=>ge(i,m,a),submitCallback:$=>Fe($,()=>{j(i),de("Thank you for your feedback!")})}),document.documentElement.classList.add("no-scroll"),x.detailsPopup=!0,document.body.append(i)};async function ie(e){if(e.preventDefault(),!!e.target.closest("[data-id]"))try{const t=e.target.closest("[data-id]").dataset.id,s=await o.getExerciseById(t),i=xe(s),a=Oe(i,s)}catch(t){console.error(t),Q("Something went wrong. Please try again later.")}}function Re({target:e}){if(!e.hasAttribute("data-page"))return;const t=parseInt(e.dataset.page);P.changePage(t)}const ae=document.querySelector(".footer-error");async function Ce(e){e.preventDefault();const t=new FormData(e.currentTarget),s={};t.forEach((a,n)=>{s[n]=a});const{email:i}=he({email:s.subscribe});if(i)ae.classList.remove("visually-hidden");else{e.currentTarget.reset(),ae.classList.add("visually-hidden");try{const a=await o.subscribe({email:s.subscribe});de(a.message)}catch(a){Q(a.response.data.message)}}}let Y,A;function re(e){e.target===r.policyBtn&&(A=document.querySelector(".js-policy-modal"),Y=document.querySelector(".js-policy-modal-close")),e.target===r.termsBtn&&(A=document.querySelector(".js-terms-modal"),Y=document.querySelector(".js-terms-modal-close")),N(),A.addEventListener("click",De),Y.addEventListener("click",N),window.addEventListener("keydown",fe)}function fe(e){e.code==="Escape"&&N()}function De(e){e.target===A&&N()}function N(){A.classList.toggle("is-hidden"),document.documentElement.classList.toggle("no-scroll"),window.removeEventListener("keydown",fe)}function ne(e){e.preventDefault();const t=r.searchForm.exercise.value.trim();P.goSearch(t)}function He(){K("top")}function je(){const{scrollTopBtn:e}=r;if(window.scrollY<100){e.classList.replace("js-scroll-top-button-active","hide-scroll-top-button");return}else e.classList.replace("hide-scroll-top-button","js-scroll-top-button-active")}async function oe(e){P.goBack()}window.addEventListener("scroll",je);r.scrollTopBtn.addEventListener("click",He);P.load();ke.observe(document.querySelector("html"));
//# sourceMappingURL=commonHelpers2.js.map
