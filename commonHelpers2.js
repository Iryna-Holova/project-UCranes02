var U=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var o=(e,t,s)=>(U(e,t,"read from private field"),s?s.call(e):t.get(e)),h=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},l=(e,t,s,i)=>(U(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s);var d=(e,t,s)=>(U(e,t,"access private method"),s);import{b as ae,d as n,e as a,a as pe,r as re,s as Q,c as p,f as ne}from"./assets/common-c8f75772.js";import{l as z}from"./assets/vendor-80510813.js";function ge(e){return e.map(({filter:t,name:s,imgURL:i})=>`<li class="exercises-item">
      <a data-subfilter="${s}" class="exercises-item-container" href="">
        <img class="exercises-item-image" src="${i}" alt="${s}" />
        <div class="exercises-proprties-container">
          <h4 class="exercises-item-name">${s}</h4>
          <p class="exercises-item-type">${t}</p>
        </div>
      </a>
    </li>`).join("")}const oe="/project-UCranes02/assets/icons-0389f68f.svg#icon-heart",me="/project-UCranes02/assets/icons-0389f68f.svg#icon-close";function ve({bodyPart:e,equipment:t,gifUrl:s,name:i,target:r,description:c,rating:u,burnedCalories:m,time:v,popularity:k,_id:he}){let D=Math.round(u),F=!1;const K=JSON.parse(localStorage.getItem("favorites"));return K&&(F=K.some(N=>N._id===he)),`
  <div class="exercise-modal-backdrop" >
    <div class="exercise-modal">
        <button class="exercise-card-close-btn" type="button">
            <svg class="exercise-card-close-icon" aria-label="Modal window close icon">
                <use href="${me}"></use>
            </svg>
        </button>
        <div class="exercise-card">
            <div class="exercise-card-img-wrap">
                <img src=${s} alt="">
            </div>
                <div class="exercise-card-info">
                    <div>
                        <h2 class="exercise-card-title">${i}</h2>
                        ${D?` <div class="exercise-card-rating"><span>${D?D+".0":""}</span>
                        ${[1,2,3,4,5].map(N=>`
                        <svg aria-label="Rating star" width="16" height="16" stroke="var(--black)" fill=${D>=N?"var(--yellow)":"var(--white-transparent-20)"} >
                            <use href="/img/icons.svg#icon-star"></use>
                        </svg>`).join("")}
                          </div>`:""}
                            
                        <ul class="exercise-card-details-list">
                        ${r?`<li class="exercise-card-details-item">
                        <p class="details-name">Target</p>
                        <p class="details-value">${r}</p>
                        </li>`:""}
                        ${e?`<li class="exercise-card-details-item">
                              <p class="details-name">Body Part</p>
                              <p class="details-value">${e}</p>
                          </li>`:""}
                          ${t?`<li class="exercise-card-details-item">
                              <p class="details-name">Equipment</p>
                              <p class="details-value">${t}</p>
                          </li>`:""}
                          ${k?`<li class="exercise-card-details-item">
                              <p class="details-name">Popular</p>
                              <p class="details-value">${k}</p>
                          </li>`:""}
                          ${m&&v?`<li class="exercise-card-details-item">
                              <p class="details-name">Burned calories</p>
                              <p class="details-value">${m}/${v} min</p>
                          </li>`:""}
                         
                        </ul>
                        <p class="exercise-card-description">${c||""}</p>
                    </div>
                    <div class="exercise-card-btn-group">
                        <button class="card-btn add-favorites-btn" ${F?'style="padding: 12px 9px"':""}>
                            <span>${F?"Remove from favorites":"Add to favorites"}</span>
                            <svg class="favorites-icon" aria-label="Favorite icon" width="20" height="20" >
                                <use href="${F?`${ae}`:`${oe}heart`}"></use>
                            </svg>
                        </button>
                        <button class="card-btn add-rating-btn">Give a rating</button>
                </div>
            </div>
        </div>
    </div>
</div>`}function B({author:e,quote:t}){return`
          <p class="text-quote list-item-text">${t}</p>
          <p class="autor-quote list-item-text">${e}</p>
        `}async function P(){const e=await n.getExercises();a.gallery.innerHTML=pe(e.results),re(Number(e.page),e.totalPages)}async function _(){try{const e=await n.getFilters();a.gallery.innerHTML=ge(e.results),re(Number(e.page),e.totalPages)}catch{Q(p.ERROR_MESSAGE),a.gallery.innerHTML="<p>Nothing was found<p/>"}}async function be(){const e=new Date,t=`${e.getDate()}/${e.getMonth()}/${e.getFullYear()}`;let s;const i=JSON.parse(localStorage.getItem(p.LS_KEY_QUOTE));if(i)if(t!==i.date){try{s=await n.getQuote(),s.quote=s.quote||p.BASE_QUOTE.quote,s.author=s.author||"Unknown"}catch{a.quote.insertAdjacentHTML("beforeend",B(p.BASE_QUOTE));return}s.author!=="Unknown"&&s.quote!==p.BASE_QUOTE.quote&&(s.date=t,localStorage.setItem(p.LS_KEY_QUOTE,JSON.stringify(s))),a.quote.insertAdjacentHTML("beforeend",B(s))}else a.quote.insertAdjacentHTML("beforeend",B(i));else{try{s=await n.getQuote(),s.quote=s.quote||p.BASE_QUOTE.quote,s.author=s.author||"Unknown"}catch{a.quote.insertAdjacentHTML("beforeend",B(p.BASE_QUOTE));return}s.author!=="Unknown"&&s.quote!==p.BASE_QUOTE.quote&&(s.date=t,localStorage.setItem(p.LS_KEY_QUOTE,JSON.stringify(s))),a.quote.insertAdjacentHTML("beforeend",B(s))}}function H(e){if(e==="top")window.scrollTo({top:0,behavior:"smooth"});else{const t=e;if(t){const s=t.getBoundingClientRect();if(s.top>=0&&s.bottom<=(window.innerHeight||document.documentElement.clientHeight)){console.log("el is in viewport");return}window.scrollBy({top:s.top-20,behavior:"smooth"})}}}const le={mobile:{subfilters:9,exercises:8,favorites:8},tablet:{subfilters:12,exercises:10,favorites:10},desktop:{subfilters:12,exercises:10,favorites:999}};let G=ce(window.screen.width);const ye=new ResizeObserver(e=>{let t=ce(e[0].devicePixelContentBoxSize[0].inlineSize);G!==t&&(G=t,T.refreshLimits(le[t]))});function Se(){let e="desktop";return window.screen.width<768&&(e="mobile"),window.screen.width>=768&&window.screen.width<1440&&(e="tablet"),le[e]}function ce(e){let t="desktop";return e<768&&(t="mobile"),e>=768&&e<1440&&(t="tablet"),t}var f,b,y,L,S,g,E,w,q,I,J,$,M,O,Y;class Ee{constructor({state:t,filter:s,subfiltersPage:i,subfilter:r,searchQuery:c,exercisesPage:u,limits:m}){h(this,w);h(this,I);h(this,$);h(this,O);h(this,f,void 0);h(this,b,void 0);h(this,y,void 0);h(this,L,void 0);h(this,S,void 0);h(this,g,void 0);h(this,E,void 0);l(this,f,t),l(this,b,s),l(this,y,i),l(this,L,r),l(this,S,c),l(this,g,u),l(this,E,m)}load(){switch(be(),n.limit=o(this,E)[o(this,f)],n.filter=o(this,b),o(this,f)){case"subfilters":n.page=o(this,y),_(),d(this,$,M).call(this);break;case"exercises":n.subFilter=o(this,L),n.keyword=o(this,S),n.page=o(this,g),P(),d(this,I,J).call(this,o(this,L));break}a.pagination.addEventListener("click",_e),a.body.dataset.page==="home"&&(d(this,O,Y).call(this,o(this,b)),a.filter.addEventListener("click",we),a.subscribeForm.addEventListener("submit",Ae),a.policyBtn.addEventListener("click",te),a.termsBtn.addEventListener("click",te))}changeFilter(t){n.filter=t,n.page=1,n.limit=o(this,E).subfilters,_(),d(this,O,Y).call(this,t,o(this,b)),l(this,f,"subfilters"),l(this,b,t),l(this,y,1),d(this,$,M).call(this),d(this,w,q).call(this)}goExercises(t){n.subFilter=t,n.keyword="",n.page=1,n.limit=o(this,E).exercises,P(),l(this,f,"exercises"),l(this,L,t),l(this,S,""),l(this,g,1),d(this,I,J).call(this,t),d(this,w,q).call(this),H(a.gallerySubtitle)}goBack(){n.page=o(this,y),n.limit=o(this,E).subfilters,_(),l(this,f,"subfilters"),d(this,$,M).call(this),d(this,w,q).call(this)}changePage(t){switch(n.page=t,o(this,f)){case"subfilters":_(),l(this,y,t);break;case"exercises":P(),l(this,g,t);break}d(this,w,q).call(this),H(a.gallerySubtitle)}goSearch(t){n.keyword=t,n.page=1,P(),l(this,S,t),l(this,g,1),d(this,w,q).call(this)}resetSearch(){n.keyword="",n.page=1,P(),l(this,S,""),l(this,g,1),d(this,w,q).call(this)}refreshLimits(t){switch(this.limits=t,n.limit=o(this,E)[o(this,f)],o(this,f)){case"subfilters":_();break;case"exercises":P();break}}}f=new WeakMap,b=new WeakMap,y=new WeakMap,L=new WeakMap,S=new WeakMap,g=new WeakMap,E=new WeakMap,w=new WeakSet,q=function(){sessionStorage.setItem(p.SS_KEY_FILTERS,JSON.stringify({state:o(this,f),filter:o(this,b),subfiltersPage:o(this,y),subfilter:o(this,L),searchQuery:o(this,S),exercisesPage:o(this,g)}))},I=new WeakSet,J=function(t){a.gallery.dataset.cards="exercises",a.backBtn.classList.remove("back-button-hidden"),a.searchForm.classList.remove("search-form-hidden"),a.gallerySubtitle.innerHTML=`<span class="exercises-title">&nbsp;/</span><h3 class="exercises-subtitle">${t}</h3>`,a.gallery.addEventListener("click",X),a.backBtn.addEventListener("click",ie),a.searchForm.addEventListener("input",z(se,1e3,{leading:!1,trailing:!0})),a.gallery.removeEventListener("click",Z),a.searchForm.reset()},$=new WeakSet,M=function(){a.gallery.dataset.cards="subfilters",a.backBtn.classList.add("back-button-hidden"),a.searchForm.classList.add("search-form-hidden"),a.gallerySubtitle.innerHTML="",a.gallery.addEventListener("click",Z),a.gallery.removeEventListener("click",X),a.backBtn.removeEventListener("click",ie),a.searchForm.removeEventListener("input",z(se,1e3,{leading:!1,trailing:!0}))},O=new WeakSet,Y=function(t,s){[...a.filter.children].forEach(({firstElementChild:i})=>{switch(i.dataset.filter){case t:i.classList.add("filter-button-active");break;case s:i.classList.remove("filter-button-active");break}})};const T=new Ee({...JSON.parse(sessionStorage.getItem(p.SS_KEY_FILTERS))??{state:"subfilters",filter:"muscles",subfiltersPage:1,subfilter:"",searchQuery:"",exercisesPage:1},limits:Se()});function we(e){e.target.hasAttribute("data-filter")&&T.changeFilter(e.target.dataset.filter)}async function Z(e){if(e.preventDefault(),!e.target.closest("[data-subfilter]"))return;const{subfilter:t}=e.target.closest("[data-subfilter]").dataset;T.goExercises(t)}function xe(e){const t=localStorage.getItem("favorites"),s=JSON.parse(t),i=s.map(r=>r._id).indexOf(e);s.splice(i,1),localStorage.setItem("favorites",JSON.stringify(s))}function Le(e){const t=document.querySelector(".add-favorites-btn"),s=localStorage.getItem("favorites"),i=JSON.parse(s);if(s)i.some(r=>r._id===e._id)?(xe(e._id),t.style.padding="12px 16px",t.querySelector("span").textContent="Add to favorites",t.querySelector("use").setAttribute("href",oe)):(i.push(e),localStorage.setItem("favorites",JSON.stringify(i)),t.style.padding="12px 9px",t.querySelector("span").textContent="Remove from favorites",t.querySelector("use").setAttribute("href",ae));else{const r=JSON.stringify([e]);localStorage.setItem("favorites",r)}}const ke=/^\w+@[a-zA-Z_]+?.[a-zA-Z]{2,3}$/;function qe(e,t){const[s,i,r]=t.querySelectorAll(".users_rating, label"),[c,u,m]=t.querySelectorAll(".error");e.rate?(s.classList.add("invalid"),c.textContent=e.rate):(s.classList.remove("invalid"),c.textContent=""),e.email?(i.classList.add("invalid"),u.textContent=e.email):(i.classList.remove("invalid"),u.textContent=""),e.review?(r.classList.add("invalid"),m.textContent=e.review):(r.classList.remove("invalid"),m.textContent="")}function de({rate:e,email:t,review:s}){const i={isInvalid:!1};return e||(i.isInvalid=!0,i.rate="Please select a rating"),t||(i.isInvalid=!0,i.email="Please enter an email"),ke.test(t)||(i.isInvalid=!0,i.email="Please enter a valid email"),s||(i.isInvalid=!0,i.review="Please enter a review"),i}async function Te(e,t){e.preventDefault();const s=new FormData(e.target),i={rate:Number(s.get("rate")),email:s.get("email"),review:s.get("review")},r=de(i);if(qe(r,e.target),!r.isInvalid)try{const c=await n.updateExerciseRating(i);t()}catch(c){console.log(c),Q("Something went wrong. Please try again later.")}}function Pe(e){const t=e.target.closest(".rating");if(!t)return;const s=t.querySelectorAll('[name="rate"]'),i=t.parentElement.firstElementChild;s.forEach(r=>{r.checked&&(i.textContent=r.value+".0")})}const x={detailsPopup:!1,ratingPopup:!1},V=e=>e.stopPropagation(),$e=(e,{closeCallback:t,submitCallback:s})=>{const i=e.querySelector(".modal__close-btn"),r=e.querySelector(".give_a_rating"),c=e.querySelector(".rating");r.setAttribute("novalidate",!0),c.addEventListener("click",u=>{Pe(u)}),i.addEventListener("click",()=>{t()}),r.addEventListener("submit",u=>{u.preventDefault(),s(u)})},R=e=>{x.detailsPopup=!1,x.ratingPopup=!1,e==null||e.remove(),document.documentElement.classList.remove("no-scroll")},ue=(e,t,s)=>{t.remove(),e.innerHTML="",x.ratingPopup=!1,e.append(s)},W=(e,t,s)=>{switch(!0){case(x.detailsPopup&&!x.ratingPopup):R(e);return;case(x.detailsPopup&&x.ratingPopup):ue(e,t,s);return;default:R(e);return}},Be=(e,t)=>{const s=document.createElement("div");s.innerHTML=e;const i=s.querySelector(".exercise-modal-backdrop"),r=s.querySelector(".exercise-modal"),c=s.querySelector(".exercise-card-close-btn"),u=s.querySelector(".add-rating-btn"),m=s.querySelector(".add-favorites-btn"),v=document.querySelector("#modal-template").content.firstElementChild.cloneNode(!0);window.addEventListener("keydown",k=>{k.code==="Escape"&&W(i,v,r)}),i.addEventListener("click",()=>{W(i,v,r)}),r.addEventListener("click",V),v.addEventListener("click",V),c.addEventListener("click",()=>{R(i)}),u.addEventListener("click",()=>{x.ratingPopup=!0,i.innerHTML="",i.append(v)}),m.addEventListener("click",k=>{Le(t)}),$e(v,{closeCallback:()=>ue(i,v,r),submitCallback:k=>Te(k,()=>{R(i),ne("Thank you for your feedback!")})}),document.documentElement.classList.add("no-scroll"),x.detailsPopup=!0,document.body.append(i)};async function X(e){if(e.preventDefault(),!!e.target.closest("[data-id]"))try{const t=e.target.closest("[data-id]").dataset.id,s=await n.getExerciseById(t),i=ve(s),r=Be(i,s)}catch(t){console.error(t),Q("Something went wrong. Please try again later.")}}function _e({target:e}){if(!e.hasAttribute("data-page"))return;const t=parseInt(e.dataset.page);T.changePage(t)}const ee=document.querySelector(".footer-error");async function Ae(e){e.preventDefault();const t=new FormData(e.currentTarget),s={};t.forEach((r,c)=>{s[c]=r});const{email:i}=de({email:s.subscribe});if(i)ee.classList.remove("visually-hidden");else{e.currentTarget.reset(),ee.classList.add("visually-hidden");try{const r=await n.subscribe({email:s.subscribe});ne(r.message)}catch(r){Q(r.response.data.message)}}}let j,A;function te(e){e.target===a.policyBtn&&(A=document.querySelector(".js-policy-modal"),j=document.querySelector(".js-policy-modal-close")),e.target===a.termsBtn&&(A=document.querySelector(".js-terms-modal"),j=document.querySelector(".js-terms-modal-close")),C(),A.addEventListener("click",Ie),j.addEventListener("click",C),window.addEventListener("keydown",fe)}function fe(e){e.code==="Escape"&&C()}function Ie(e){e.target===A&&C()}function C(){A.classList.toggle("is-hidden"),document.documentElement.classList.toggle("no-scroll"),window.removeEventListener("keydown",fe)}function se(e){e.preventDefault();const t=a.searchForm.exercise.value.trim();T.goSearch(t)}function Oe(){H("top")}function De(){const{scrollTopBtn:e}=a;if(window.scrollY<100){e.classList.replace("js-scroll-top-button-active","hide-scroll-top-button");return}else e.classList.replace("hide-scroll-top-button","js-scroll-top-button-active")}async function ie(e){T.goBack()}window.addEventListener("scroll",De);a.scrollTopBtn.addEventListener("click",Oe);T.load();ye.observe(document.querySelector("html"));
//# sourceMappingURL=commonHelpers2.js.map
